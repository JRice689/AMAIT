<!DOCTYPE html>
<head>
  {% load static %}
  <link rel="stylesheet" href="{% static 'styles.css' %}" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <title>CCAIT</title>
</head>

<body onload='courseOptions()'>
  <script src = "{% static 'scripts.js' %}"></script>
  <img src="{% static 'F16.png' %}" class="icon" />
  <h3>Crew Chief AI Tutor</h3>

  <div id="history" style="height:360px; width:720px; ; overflow-y: scroll;">
    {% for text in historyChat %}
    <p>{{ text }}</p>
    {% endfor %}
    <script>
      var historyDiv = document.getElementById("history");
      historyDiv.scrollTop = historyDiv.scrollHeight;
    </script>
  </div>

  <form action="/chat/" method="POST">
    {% csrf_token %}

    <select id="course" name="course">
      <option disabled selected value>Select a Course</option>
      {% for course in course_list %}
      <option value="{{ course }}">{{ course }}</option>
      {% endfor %}
    </select>

    <select id="block" name="block"></select>
    <select id="unit" name="unit"></select>

    <br />

    <input
      type="text"
      name="studentInput"
      placeholder="Ask you question here"
      required
    />
    <input type="submit" value="Submit" />
  </form>
  {{ error }}

  <div>
    <p>
      Token Count - Prompt: {{ tokenPrompt }}, Completion: {{ tokenCompletion}}, Total: {{ tokenTotal }}
    </p>
  </div>
</body>
